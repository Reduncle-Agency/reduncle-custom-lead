<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador 3D</title>
</head>
<body style="margin: 0; padding: 0; overflow: hidden; -ms-overflow-style: none; scrollbar-width: none;">
    <div id="main-container" style="width: 100vw; height: 100vh; position: relative; overflow-x: hidden; overflow-y: auto; background: #ffffff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #1a1a1a; margin: 0; padding: 0; box-sizing: border-box;" onscroll="onPageScroll()">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                overflow-x: hidden;
                overflow-y: hidden;
                -ms-overflow-style: none;  /* IE y Edge */
                scrollbar-width: none;  /* Firefox */
            }
            
            html::-webkit-scrollbar,
            body::-webkit-scrollbar {
                display: none;  /* Chrome, Safari, Opera */
                width: 0;
                height: 0;
            }

            #main-container {
                width: 100vw;
                height: 100vh;
                position: relative;
                overflow-x: hidden;
                overflow-y: auto;
                background: #ffffff;
                font-family: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                color: #1a1a1a;
                transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1), color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                letter-spacing: -0.01em;
                -ms-overflow-style: none !important;
                scrollbar-width: none !important;
            }
            
            #main-container::-webkit-scrollbar {
                display: none !important;
                width: 0 !important;
                height: 0 !important;
                background: transparent !important;
            }
            
            #main-container::-webkit-scrollbar-track,
            #main-container::-webkit-scrollbar-thumb {
                display: none !important;
                background: transparent !important;
            }

            #canvas-container {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1;
                pointer-events: none;
            }

            #canvas-container canvas {
                pointer-events: auto;
            }

            #logo-container {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                z-index: 100;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 20px;
                pointer-events: none;
                transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }

            #logo-img {
                max-width: 200px;
                max-height: 80px;
                width: auto;
                height: auto;
                object-fit: contain;
                pointer-events: none;
            }

            @media (max-width: 768px) {
                #logo-container {
                    padding: 15px;
                }
                #logo-img {
                    max-width: 150px;
                    max-height: 60px;
                }
            }

            #client-info-container {
                position: fixed;
                top: 100px;
                left: 0;
                width: 100%;
                z-index: 99;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 0 20px;
                pointer-events: none;
                transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }

            #client-info-box {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px) saturate(180%);
                -webkit-backdrop-filter: blur(20px) saturate(180%);
                border-radius: 16px;
                padding: 24px 40px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.05);
                border: 1px solid rgba(0, 0, 0, 0.08);
                text-align: center;
                max-width: 800px;
                width: 100%;
            }

            .client-info-item {
                margin: 8px 0;
                font-size: 18px;
                font-weight: 600;
                color: #1a1a1a;
                transition: color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }

            #client-name {
                font-size: 28px;
                font-weight: 700;
                color: #ff0000;
                margin-bottom: 12px;
            }

            #client-company {
                font-size: 22px;
                font-weight: 600;
                color: #333;
                margin-bottom: 8px;
            }

            #client-details {
                font-size: 16px;
                font-weight: 400;
                color: #666;
                line-height: 1.6;
            }

            @media (max-width: 768px) {
                #client-info-container {
                    top: 80px;
                    padding: 0 15px;
                }
                #client-info-box {
                    padding: 20px 24px;
                }
                #client-name {
                    font-size: 24px;
                }
                #client-company {
                    font-size: 20px;
                }
                #client-details {
                    font-size: 14px;
                }
            }

            #content {
                position: relative;
                z-index: 10;
                min-height: 100vh;
                padding: 120px 60px;
                max-width: 1400px;
                margin: 0 auto;
            }

            .section {
                background: rgba(255, 255, 255, 0.7);
                backdrop-filter: blur(20px) saturate(180%);
                -webkit-backdrop-filter: blur(20px) saturate(180%);
                border-radius: 24px;
                padding: 60px;
                margin-bottom: 120px;
                border: 1px solid rgba(0, 0, 0, 0.08);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06), 0 2px 8px rgba(0, 0, 0, 0.04);
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
            }
            
            .section:last-of-type {
                margin-bottom: 200px; /* M√°s espacio al final para ver el coche */
            }
            
            .section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 1px;
                background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent);
            }
            
            .circuit-track {
                position: relative;
                margin: 40px 0;
                padding-left: 60px;
            }
            
            .circuit-line {
                position: absolute;
                left: 20px;
                top: 0;
                bottom: 0;
                width: 3px;
                background: rgba(0, 0, 0, 0.1);
                border-radius: 2px;
            }
            
            .circuit-line-fill {
                position: absolute;
                left: 20px;
                top: 0;
                width: 3px;
                background: linear-gradient(180deg, #ff0000 0%, #cc0000 100%);
                border-radius: 2px;
                height: 0%;
                transition: height 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                box-shadow: 0 0 12px rgba(255, 0, 0, 0.4);
            }
            
            .circuit-node {
                position: absolute;
                left: 8px;
                width: 28px;
                height: 28px;
                border-radius: 50%;
                background: #ffffff;
                border: 3px solid rgba(0, 0, 0, 0.1);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 2;
            }
            
            .circuit-node.active {
                background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
                border-color: #ff0000;
                box-shadow: 0 0 20px rgba(255, 0, 0, 0.5), 0 4px 12px rgba(255, 0, 0, 0.3);
                transform: scale(1.15);
            }
            
            .circuit-node.completed {
                background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
                border-color: #ff0000;
                box-shadow: 0 0 16px rgba(255, 0, 0, 0.4);
            }
            
            .circuit-step {
                position: relative;
                padding: 24px 0 24px 50px;
                min-height: 80px;
            }
            
            .circuit-step-content {
                position: relative;
                z-index: 1;
            }
            
            .circuit-step-title {
                font-size: 22px;
                font-weight: 700;
                color: #1a1a1a;
                margin-bottom: 8px;
                transition: color 0.4s ease;
            }
            
            .circuit-step.active .circuit-step-title {
                color: #ff0000;
            }
            
            .circuit-step-description {
                font-size: 17px;
                color: #666;
                line-height: 1.6;
                transition: color 0.4s ease;
            }
            
            .circuit-step.active .circuit-step-description {
                color: #1a1a1a;
            }

            h1 {
                font-size: 64px;
                margin-bottom: 24px;
                background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                font-weight: 800;
                letter-spacing: -0.03em;
                line-height: 1.1;
            }

            h2 {
                font-size: 42px;
                margin-bottom: 32px;
                color: #ff0000;
                transition: color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                font-weight: 700;
                letter-spacing: -0.02em;
                line-height: 1.2;
            }

            h3 {
                font-size: 28px;
                margin-bottom: 20px;
                color: #000000;
                font-weight: 700;
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                letter-spacing: -0.01em;
                line-height: 1.3;
            }

            p, li {
                font-size: 19px;
                line-height: 1.75;
                margin-bottom: 20px;
                color: #1a1a1a;
                font-weight: 400;
                transition: color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                letter-spacing: -0.005em;
            }

            ul {
                list-style: none;
                padding-left: 0;
            }

            li {
                padding-left: 30px;
                position: relative;
            }

            li:before {
                content: "‚Üí";
                position: absolute;
                left: 0;
                color: #ff0000;
                font-weight: 700;
                font-size: 20px;
                top: 2px;
            }

            .highlight {
                color: #ff0000;
                font-weight: bold;
            }

            .price-box {
                background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
                padding: 48px;
                border-radius: 20px;
                text-align: center;
                margin-top: 32px;
                box-shadow: 0 12px 40px rgba(255, 0, 0, 0.25), 0 4px 12px rgba(255, 0, 0, 0.15);
                position: relative;
                overflow: hidden;
            }
            
            .price-box::before {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
                animation: shimmer 3s ease-in-out infinite;
            }
            
            @keyframes shimmer {
                0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
                50% { transform: translate(-50%, -50%) rotate(180deg); }
            }

            .price-box h3 {
                font-size: 36px;
                margin-bottom: 10px;
            }

            .circuit-track {
                position: relative;
                margin: 50px 0;
                padding-left: 60px;
            }
            
            .circuit-line {
                position: absolute;
                left: 20px;
                top: 0;
                bottom: 0;
                width: 3px;
                background: rgba(0, 0, 0, 0.1);
                border-radius: 2px;
            }
            
            .circuit-line-fill {
                position: absolute;
                left: 20px;
                top: 0;
                width: 3px;
                background: linear-gradient(180deg, #ff0000 0%, #cc0000 100%);
                border-radius: 2px;
                height: 0%;
                transition: height 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                box-shadow: 0 0 12px rgba(255, 0, 0, 0.4);
            }
            
            .circuit-node {
                position: absolute;
                left: 8px;
                width: 28px;
                height: 28px;
                border-radius: 50%;
                background: #ffffff;
                border: 3px solid rgba(0, 0, 0, 0.1);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 2;
            }
            
            .circuit-node.active {
                background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
                border-color: #ff0000;
                box-shadow: 0 0 20px rgba(255, 0, 0, 0.5), 0 4px 12px rgba(255, 0, 0, 0.3);
                transform: scale(1.15);
            }
            
            .circuit-node.completed {
                background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
                border-color: #ff0000;
                box-shadow: 0 0 16px rgba(255, 0, 0, 0.4);
            }
            
            .circuit-step {
                position: relative;
                padding: 28px 0 28px 50px;
                min-height: 90px;
            }
            
            .circuit-step-content {
                position: relative;
                z-index: 1;
            }
            
            .circuit-step-title {
                font-size: 22px;
                font-weight: 700;
                color: #1a1a1a;
                margin-bottom: 10px;
                transition: color 0.4s ease;
            }
            
            .circuit-step.active .circuit-step-title {
                color: #ff0000;
            }
            
            .circuit-step.completed .circuit-step-title {
                color: #ff0000;
                opacity: 0.8;
            }
            
            .circuit-step-description {
                font-size: 17px;
                color: #333;
                line-height: 1.6;
                transition: color 0.4s ease;
                font-weight: 400;
            }
            
            .circuit-step.active .circuit-step-description {
                color: #000;
                font-weight: 500;
            }
            
            .circuit-step.completed .circuit-step-description {
                color: #1a1a1a;
                font-weight: 400;
            }

            #instructions {
                position: fixed;
                bottom: 32px;
                right: 32px;
                color: rgba(0, 0, 0, 0.7);
                text-align: right;
                font-size: 13px;
                z-index: 100;
                background: rgba(255, 255, 255, 0.85);
                backdrop-filter: blur(12px) saturate(180%);
                -webkit-backdrop-filter: blur(12px) saturate(180%);
                padding: 14px 20px;
                border-radius: 12px;
                border: 1px solid rgba(0, 0, 0, 0.08);
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                font-weight: 500;
                letter-spacing: 0.01em;
            }

            @media (max-width: 768px) {
                #content {
                    padding: 60px 20px;
                }

                h1 {
                    font-size: 42px;
                    margin-bottom: 24px;
                }

                h2 {
                    font-size: 32px;
                    margin-bottom: 24px;
                }
                
                h3 {
                    font-size: 24px;
                    margin-bottom: 20px;
                }
                
                .section {
                    padding: 40px 24px;
                    margin-bottom: 100px; /* M√°s espacio en m√≥vil para ver el coche */
                }
                
                .section:last-of-type {
                    margin-top: 100px !important; /* M√°s espacio antes de Contacto en m√≥vil */
                    margin-bottom: 300px !important; /* A√∫n m√°s espacio al final en m√≥vil */
                }
                
                p, li {
                    font-size: 17px;
                    line-height: 1.7;
                    margin-bottom: 16px;
                }
                
                /* Ajustes espec√≠ficos para el circuito en m√≥vil */
                .circuit-track {
                    margin: 40px 0;
                    padding-left: 50px;
                }
                
                .circuit-step {
                    padding: 32px 0 32px 40px;
                    min-height: 100px;
                }
                
                .circuit-step-title {
                    font-size: 20px;
                    margin-bottom: 12px;
                    line-height: 1.3;
                }
                
                .circuit-step-description {
                    font-size: 16px;
                    line-height: 1.6;
                    padding-right: 10px;
                }
                
                .circuit-node {
                    width: 32px;
                    height: 32px;
                    left: 4px;
                }
                
                .circuit-line {
                    left: 18px;
                    width: 4px;
                }
                
                .circuit-line-fill {
                    left: 18px;
                    width: 4px;
                }
                
                /* M√°s espacio entre elementos de lista */
                ul {
                    padding-left: 0;
                }
                
                li {
                    margin-bottom: 16px;
                    padding-left: 32px;
                }
            }
        </style>

    <div id="canvas-container"></div>
        <!-- <div id="instructions">Haz scroll para controlar la velocidad</div> -->
        
        <!-- Logo arriba -->
        <div id="logo-container">
            <img id="logo-img" src="" alt="Logo" style="display: none;">
        </div>
        
        <!-- Informaci√≥n del cliente arriba -->
        <div id="client-info-container" style="display: none;">
            <div id="client-info-box">
                <div id="client-name" class="client-info-item"></div>
                <div id="client-company" class="client-info-item"></div>
                <div id="client-details" class="client-info-item"></div>
            </div>
        </div>

        <div id="content">
            <div class="section">
                <h1>Nuestro Proyecto</h1>
                <p>Bienvenido a nuestra propuesta de proyecto. Explora los detalles a continuaci√≥n.</p>
            </div>

            <div class="section">
                <h2>üéØ Objetivos</h2>
                <ul>
                    <li>Desarrollar una soluci√≥n innovadora que cumpla con los m√°s altos est√°ndares de calidad</li>
                    <li>Entregar resultados que superen las expectativas del cliente</li>
                    <li>Establecer una base s√≥lida para futuras colaboraciones</li>
                    <li>Implementar las mejores pr√°cticas de la industria</li>
                </ul>
            </div>

            <div class="section">
                <h2>üìã Alcance del Proyecto</h2>
                <p>El alcance incluye:</p>
                
                <div class="circuit-track">
                    <div class="circuit-line"></div>
                    <div class="circuit-line-fill" id="circuit-fill"></div>
                    
                    <div class="circuit-step" data-step="1">
                        <div class="circuit-node" id="node-1"></div>
                        <div class="circuit-step-content">
                            <div class="circuit-step-title">Fase 1: An√°lisis y Planificaci√≥n</div>
                            <div class="circuit-step-description">An√°lisis exhaustivo de requisitos, planificaci√≥n detallada y dise√±o de arquitectura</div>
                        </div>
                    </div>
                    
                    <div class="circuit-step" data-step="2">
                        <div class="circuit-node" id="node-2"></div>
                        <div class="circuit-step-content">
                            <div class="circuit-step-title">Fase 2: Desarrollo e Implementaci√≥n</div>
                            <div class="circuit-step-description">Desarrollo principal del proyecto siguiendo las mejores pr√°cticas y metodolog√≠as √°giles</div>
                        </div>
                    </div>
                    
                    <div class="circuit-step" data-step="3">
                        <div class="circuit-node" id="node-3"></div>
                        <div class="circuit-step-content">
                            <div class="circuit-step-title">Fase 3: Pruebas y Optimizaci√≥n</div>
                            <div class="circuit-step-description">Testing exhaustivo, optimizaci√≥n de rendimiento y refinamiento de funcionalidades</div>
                        </div>
                    </div>
                    
                    <div class="circuit-step" data-step="4">
                        <div class="circuit-node" id="node-4"></div>
                        <div class="circuit-step-content">
                            <div class="circuit-step-title">Fase 4: Entrega y Documentaci√≥n</div>
                            <div class="circuit-step-description">Entrega final del proyecto con documentaci√≥n completa y capacitaci√≥n del equipo</div>
                        </div>
                    </div>
                </div>
                
                <p style="margin-top: 40px;">Incluye soporte post-entrega durante el primer mes.</p>
            </div>

            <div class="section">
                <h2>üìÖ Timeline y Planificaci√≥n</h2>
                <h3>Planificaci√≥n a 3 meses</h3>
                
                <div class="circuit-track">
                    <div class="circuit-line"></div>
                    <div class="circuit-line-fill" id="timeline-fill"></div>
                    
                    <div class="circuit-step" data-step="1">
                        <div class="circuit-node" id="timeline-node-1"></div>
                        <div class="circuit-step-content">
                            <div class="circuit-step-title">Mes 1: An√°lisis y Dise√±o</div>
                            <div class="circuit-step-description">An√°lisis exhaustivo, dise√±o detallado y planificaci√≥n estrat√©gica del proyecto</div>
                        </div>
                    </div>
                    
                    <div class="circuit-step" data-step="2">
                        <div class="circuit-node" id="timeline-node-2"></div>
                        <div class="circuit-step-content">
                            <div class="circuit-step-title">Mes 2: Desarrollo Principal</div>
                            <div class="circuit-step-description">Desarrollo activo del proyecto con iteraciones y revisiones continuas</div>
                        </div>
                    </div>
                    
                    <div class="circuit-step" data-step="3">
                        <div class="circuit-node" id="timeline-node-3"></div>
                        <div class="circuit-step-content">
                            <div class="circuit-step-title">Mes 3: Refinamiento y Entrega</div>
                            <div class="circuit-step-description">Pruebas finales, optimizaci√≥n y entrega completa del proyecto</div>
                        </div>
                    </div>
                </div>
                
                <p style="margin-top: 40px;">Cada fase incluye entregables espec√≠ficos y revisiones peri√≥dicas para asegurar que el proyecto avance seg√∫n lo planificado.</p>
            </div>

            <div class="section">
                <h2>üë• Con Quien Trabajamos</h2>
                <h3>Autoridad y Experiencia</h3>
                <p>Nuestro equipo est√° compuesto por profesionales altamente cualificados con a√±os de experiencia en la industria:</p>
                <ul>
                    <li>Especialistas en desarrollo con certificaciones reconocidas</li>
                    <li>Equipo de dise√±o con portfolio de proyectos exitosos</li>
                    <li>Consultores estrat√©gicos con experiencia en m√∫ltiples sectores</li>
                    <li>Soporte t√©cnico disponible durante todo el proyecto</li>
                </ul>
                <p>Trabajamos con metodolog√≠as √°giles y mantenemos comunicaci√≥n constante con nuestros clientes.</p>
            </div>

            <div class="section">
                <h2>üí∞ Inversi√≥n</h2>
                <div class="price-box">
                    <h3>Precio del Proyecto</h3>
                    <p style="font-size: 24px; margin-top: 10px;">Personalizado seg√∫n necesidades</p>
                    <p style="margin-top: 20px; font-size: 16px;">Contacta con nosotros para una cotizaci√≥n detallada</p>
                </div>
                <p style="margin-top: 20px;">La inversi√≥n incluye:</p>
                <ul>
                    <li>Todo el desarrollo y entrega del proyecto</li>
                    <li>Soporte t√©cnico durante 1 mes post-entrega</li>
                    <li>Documentaci√≥n completa</li>
                    <li>Capacitaci√≥n del equipo si es necesario</li>
                </ul>
            </div>

            <div class="section" style="margin-bottom: 600px !important;">
                <h2>üìû Contacto</h2>
                <p>¬øTienes preguntas o quieres discutir los detalles del proyecto?</p>
                <p>Estamos aqu√≠ para ayudarte a hacer realidad tu visi√≥n.</p>
            </div>
        </div>

        <script type="importmap">
            {
                "imports": {
                    "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                    "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
                }
            }
        </script>
        <script type="module">
            import * as THREE from 'three';
            import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

            // Variables globales
            let scene, camera, renderer, car, carGroup;
            // √Ångulo inicial: un poco m√°s atr√°s en m√≥vil para mejor visibilidad
            const isMobile = window.innerWidth <= 768;
            let angle = isMobile ? Math.PI * 2.45 : Math.PI * 2.3; // M√≥vil: 441¬∞ (un poco m√°s atr√°s), Desktop: 414¬∞
            let rotationSpeed = 0; // Velocidad de rotaci√≥n (controlada por scroll)
            let radius = 6; // Radio del c√≠rculo (m√°s grande)
            const friction = 0.95; // Fricci√≥n (0.95 = frena gradualmente, m√°s bajo = frena m√°s r√°pido)
            const minSpeed = 0.001; // Velocidad m√≠nima antes de detenerse completamente
            let sparkParticles = []; // Array para las part√≠culas de chispas
            let sparkSystem = null; // Sistema de part√≠culas de chispas
            let scrollProgress = 0; // Progreso del scroll para animaci√≥n

            // Inicializar la escena
            function init() {
                // Crear escena con fondo transparente
                scene = new THREE.Scene();
                scene.background = null; // Sin fondo

                // Crear c√°mara
                const container = document.getElementById('canvas-container');
                if (!container) {
                    console.error('Container no encontrado');
                    return;
                }
                
                const width = window.innerWidth;
                const height = window.innerHeight;
                
                camera = new THREE.PerspectiveCamera(50, width / height, 0.1, 1000);
                camera.position.set(0, 1.2, 22); // Posici√≥n normal de c√°mara
                camera.lookAt(0, 0, 0);
                
                // Crear un grupo para el coche (para facilitar el movimiento)
                carGroup = new THREE.Group();
                scene.add(carGroup);

                // Crear renderer con transparencia
                renderer = new THREE.WebGLRenderer({ 
                    antialias: true, 
                    alpha: true,
                    powerPreference: "high-performance"
                });
                renderer.setSize(width, height);
                renderer.setClearColor(0x000000, 0); // Fondo transparente
                renderer.shadowMap.enabled = false; // Sin sombras para mejor rendimiento
                container.appendChild(renderer.domElement);

                // Agregar luces para iluminar solo el coche
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
                scene.add(ambientLight);

                const directionalLight1 = new THREE.DirectionalLight(0xffffff, 1);
                directionalLight1.position.set(5, 10, 5);
                scene.add(directionalLight1);

                const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.5);
                directionalLight2.position.set(-5, 5, -5);
                scene.add(directionalLight2);

                // Luz puntual para mejor iluminaci√≥n
                const pointLight = new THREE.PointLight(0xffffff, 0.6);
                pointLight.position.set(0, 5, 0);
                scene.add(pointLight);

                // Crear sistema de part√≠culas para chispas
                createSparkSystem();

                // Cargar el modelo del coche desde CDN de Shopify
                const loader = new GLTFLoader();
                loader.load(
                    'https://cdn.shopify.com/3d/models/0a1c5e3c0fb6a380/Meshy_AI_Red_Formula_1_0217154143_texture.glb',
                    function(gltf) {
                        car = gltf.scene;
                        
                        // Calcular el centro del modelo
                        const box = new THREE.Box3().setFromObject(car);
                        const center = box.getCenter(new THREE.Vector3());
                        const size = box.getSize(new THREE.Vector3());
                        
                        // Centrar el modelo
                        car.position.x = -center.x;
                        car.position.y = -center.y;
                        car.position.z = -center.z;
                        
                        // Escalar el coche m√°s grande
                        const maxDim = Math.max(size.x, size.y, size.z);
                        const scale = 10 / maxDim; // Mucho m√°s grande (era 5, ahora 8)
                        car.scale.multiplyScalar(scale);
                        
                        // Desactivar sombras para mejor rendimiento
                        car.traverse(function(child) {
                            if (child.isMesh) {
                                child.castShadow = false;
                                child.receiveShadow = false;
                            }
                        });
                        
                        // Agregar el coche al grupo
                        carGroup.add(car);
                        
                        // Posicionar el coche inmediatamente en la posici√≥n inicial (m√°s atr√°s)
                        const x = Math.cos(angle) * radius;
                        const z = Math.sin(angle) * radius;
                        carGroup.position.x = x;
                        carGroup.position.z = z;
                        carGroup.position.y = 0;
                        
                        // Orientar el coche correctamente desde el inicio
                        const tangentX = -Math.sin(angle);
                        const tangentZ = Math.cos(angle);
                        const lookX = x + tangentX;
                        const lookZ = z + tangentZ;
                        car.lookAt(lookX, 0, lookZ);
                        car.rotateY(Math.PI / 2);
                    },
                    function(progress) {
                        console.log('Progreso de carga:', (progress.loaded / progress.total * 100) + '%');
                    },
                    function(error) {
                        console.error('Error al cargar el modelo:', error);
                    }
                );

                // Event listener para el scroll del coche
                window.addEventListener('wheel', onScroll, { passive: true });
                
                // Eventos t√°ctiles para m√≥vil
                window.addEventListener('touchstart', onTouchStart, { passive: true });
                window.addEventListener('touchmove', onTouchMove, { passive: false });
                window.addEventListener('touchend', onTouchEnd, { passive: true });
                
                // Event listener para el scroll de la p√°gina (en el contenedor)
                const mainContainer = document.getElementById('main-container');
                if (mainContainer) {
                    mainContainer.addEventListener('scroll', onPageScroll, { passive: true });
                }
                // Tambi√©n en window por si acaso
                window.addEventListener('scroll', onPageScroll, { passive: true });
                
                // Ajustar tama√±o al redimensionar ventana
                window.addEventListener('resize', onWindowResize);
                
                // Iniciar animaci√≥n
                animate();
            }

            // Manejar el scroll de la p√°gina para animaci√≥n
            function onPageScroll() {
                const mainContainer = document.getElementById('main-container');
                if (!mainContainer) return;
                
                // Obtener scroll del contenedor principal (no de window)
                const scrollTop = mainContainer.scrollTop;
                const windowHeight = mainContainer.clientHeight;
                const scrollHeight = mainContainer.scrollHeight;
                
                // Calcular progreso del scroll (0 a 1)
                // Al 15% del scroll total, la animaci√≥n debe estar completa
                const maxScroll = Math.max(scrollHeight - windowHeight, 1);
                const scrollPercent = scrollTop / maxScroll;
                
                // Mapear: 0-15% del scroll = 0-1 en el progreso de animaci√≥n
                scrollProgress = Math.min(scrollPercent / 0.15, 1);
                
                // Aplicar animaci√≥n suave de blanco a negro y texto a blanco
                updateBackgroundAnimation();
            }
            
            // Llamar al inicio para establecer estado inicial
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(function() {
                        onPageScroll();
                        updateBackgroundAnimation();
                    }, 100);
                });
            } else {
                setTimeout(function() {
                    onPageScroll();
                    updateBackgroundAnimation();
                }, 100);
            }

            function updateBackgroundAnimation() {
                const container = document.getElementById('main-container');
                if (!container) return;
                
                // Interpolaci√≥n suave usando easing
                const eased = easeInOutCubic(scrollProgress);
                
                // Calcular colores: fondo de blanco a NEGRO
                const bgR = Math.round(255 - (255 * eased));
                const bgG = Math.round(255 - (255 * eased));
                const bgB = Math.round(255 - (255 * eased));
                const bgColor = `rgb(${bgR}, ${bgG}, ${bgB})`;
                
                // Texto: de negro oscuro a BLANCO cuando hay scroll
                // Al inicio: negro muy oscuro (#1a1a1a) para mejor contraste
                // Al hacer scroll: blanco (#ffffff)
                const textR = Math.round(26 + (229 * eased)); // De 26 (1a) a 255 (ff)
                const textG = Math.round(26 + (229 * eased));
                const textB = Math.round(26 + (229 * eased));
                const textColor = `rgb(${textR}, ${textG}, ${textB})`;
                
                // Aplicar colores al contenedor con !important para forzar
                container.style.setProperty('background', bgColor, 'important');
                container.style.setProperty('color', textColor, 'important');
                
                // Actualizar secciones con efectos premium
                const sections = document.querySelectorAll('.section');
                sections.forEach(section => {
                    if (eased < 0.5) {
                        // Fondo claro con glassmorphism premium
                        section.style.background = `rgba(255, 255, 255, ${0.7 - (0.3 * eased)})`;
                        section.style.borderColor = `rgba(0, 0, 0, ${0.08 + (0.12 * eased)})`;
                        section.style.boxShadow = `0 8px 32px rgba(0, 0, 0, ${0.06 - (0.04 * eased)}), 0 2px 8px rgba(0, 0, 0, ${0.04 - (0.02 * eased)})`;
                    } else {
                        // Fondo oscuro con glassmorphism premium
                        section.style.background = `rgba(${bgR}, ${bgG}, ${bgB}, ${0.15 + (0.1 * eased)})`;
                        section.style.borderColor = `rgba(255, 255, 255, ${0.1 + (0.1 * eased)})`;
                        section.style.boxShadow = `0 8px 32px rgba(0, 0, 0, ${0.3 + (0.2 * eased)}), 0 2px 8px rgba(0, 0, 0, ${0.2 + (0.1 * eased)})`;
                    }
                });
                
                // Actualizar textos con mejor contraste
                const h3Elements = document.querySelectorAll('h3');
                h3Elements.forEach(h3 => {
                    h3.style.color = textColor;
                    h3.style.fontWeight = '600'; // M√°s bold para mejor legibilidad
                });
                
                const pElements = document.querySelectorAll('p, li');
                pElements.forEach(el => {
                    el.style.color = textColor;
                    el.style.fontWeight = '400';
                    // Asegurar buen contraste
                    if (eased < 0.5) {
                        // Al inicio, texto m√°s oscuro para mejor legibilidad
                        el.style.color = `rgb(${Math.max(26, textR - 20)}, ${Math.max(26, textG - 20)}, ${Math.max(26, textB - 20)})`;
                    } else {
                        el.style.color = textColor;
                    }
                });
                
                // Mantener h1 y h2 en ROJO siempre (no cambian con scroll)
                const h1Elements = document.querySelectorAll('h1');
                h1Elements.forEach(h1 => {
                    h1.style.background = 'linear-gradient(135deg, #ff0000 0%, #cc0000 100%)';
                    h1.style.webkitBackgroundClip = 'text';
                    h1.style.webkitTextFillColor = 'transparent';
                });
                
                const h2Elements = document.querySelectorAll('h2');
                h2Elements.forEach(h2 => {
                    h2.style.color = '#ff0000'; // Siempre rojo
                    h2.style.fontWeight = '700'; // M√°s bold
                });
                
                // Actualizar logo seg√∫n el scroll (m√°s visible en fondo oscuro)
                const logoContainer = document.getElementById('logo-container');
                if (logoContainer) {
                    // El logo se ve mejor con m√°s opacidad en fondo oscuro
                    logoContainer.style.opacity = eased > 0.5 ? '1' : '0.9';
                }
                
                // Actualizar informaci√≥n del cliente seg√∫n el scroll
                const clientInfoBox = document.getElementById('client-info-box');
                if (clientInfoBox) {
                    if (eased < 0.5) {
                        // Fondo claro
                        clientInfoBox.style.background = 'rgba(255, 255, 255, 0.95)';
                        clientInfoBox.style.borderColor = 'rgba(0, 0, 0, 0.08)';
                    } else {
                        // Fondo oscuro
                        clientInfoBox.style.background = `rgba(${bgR}, ${bgG}, ${bgB}, 0.9)`;
                        clientInfoBox.style.borderColor = 'rgba(255, 255, 255, 0.2)';
                    }
                }
                
                const clientCompany = document.getElementById('client-company');
                if (clientCompany) {
                    clientCompany.style.color = eased < 0.5 ? '#333' : textColor;
                }
                
                const clientDetails = document.getElementById('client-details');
                if (clientDetails) {
                    clientDetails.style.color = eased < 0.5 ? '#666' : textColor;
                }
                
                // Actualizar textos del circuito para mejor contraste
                const circuitDescriptions = document.querySelectorAll('.circuit-step-description');
                circuitDescriptions.forEach(desc => {
                    if (eased < 0.5) {
                        // Fondo claro: texto oscuro para mejor legibilidad
                        desc.style.color = '#333';
                    } else {
                        // Fondo oscuro: texto claro
                        desc.style.color = textColor;
                    }
                });
                
                const circuitTitles = document.querySelectorAll('.circuit-step-title');
                circuitTitles.forEach(title => {
                    const step = title.closest('.circuit-step');
                    if (step && step.classList.contains('active')) {
                        title.style.color = '#ff0000';
                    } else if (eased < 0.5) {
                        title.style.color = '#1a1a1a';
                    } else {
                        title.style.color = textColor;
                    }
                });
                
                // Actualizar instrucciones
                const instructions = document.getElementById('instructions');
                if (instructions) {
                    instructions.style.color = textColor;
                    instructions.style.background = `rgba(${bgR}, ${bgG}, ${bgB}, ${0.8})`;
                    instructions.style.fontWeight = '500';
                }
            }

            // Funci√≥n de easing suave (cubic ease-in-out)
            function easeInOutCubic(t) {
                return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
            }

            // Variables para el control t√°ctil
            let lastTouchY = 0;
            let isTouching = false;
            
            // Manejar el scroll
            function onScroll(event) {
                if (!car) return;
                // Controlar la velocidad de rotaci√≥n con el scroll
                const delta = event.deltaY * 0.0001; // Sensibilidad del scroll
                rotationSpeed += delta;
                
                // Limitar la velocidad (opcional, para evitar velocidades extremas)
                rotationSpeed = Math.max(-0.05, Math.min(0.05, rotationSpeed));
            }
            
            // Manejar eventos t√°ctiles
            function onTouchStart(event) {
                if (!car) return;
                if (event.touches.length > 0) {
                    lastTouchY = event.touches[0].clientY;
                    isTouching = true;
                }
            }
            
            function onTouchMove(event) {
                if (!car || !isTouching) return;
                event.preventDefault(); // Prevenir scroll nativo si es necesario
                
                if (event.touches.length > 0) {
                    const currentTouchY = event.touches[0].clientY;
                    const deltaY = lastTouchY - currentTouchY; // Invertido para que subir = acelerar
                    const delta = deltaY * 0.0003; // Sensibilidad t√°ctil (un poco m√°s sensible que el scroll)
                    
                    rotationSpeed += delta;
                    rotationSpeed = Math.max(-0.05, Math.min(0.05, rotationSpeed));
                    
                    lastTouchY = currentTouchY;
                }
            }
            
            function onTouchEnd(event) {
                isTouching = false;
            }

            // Animaci√≥n suave
            function animate() {
                requestAnimationFrame(animate);
                
                if (carGroup && car) {
                    // Aplicar fricci√≥n (frena gradualmente cuando no hay scroll)
                    rotationSpeed *= friction;
                    
                    // Detener completamente si la velocidad es muy peque√±a
                    if (Math.abs(rotationSpeed) < minSpeed) {
                        rotationSpeed = 0;
                    }
                    
                    // Actualizar el √°ngulo de la trayectoria circular
                    angle += rotationSpeed;
                    
                    // Calcular la posici√≥n del coche en el c√≠rculo
                    const x = Math.cos(angle) * radius;
                    const z = Math.sin(angle) * radius;
                    
                    // Mover el grupo del coche
                    carGroup.position.x = x;
                    carGroup.position.z = z;
                    carGroup.position.y = 0;
                    
                    // Orientar el coche hacia la direcci√≥n del movimiento
                    // La direcci√≥n tangente al c√≠rculo es perpendicular al radio
                    const tangentX = -Math.sin(angle);
                    const tangentZ = Math.cos(angle);
                    
                    // Calcular el punto hacia donde debe mirar el coche
                    const lookX = x + tangentX;
                    const lookZ = z + tangentZ;
                    
                    // Hacer que el coche mire hacia donde se mueve (conduciendo)
                    car.lookAt(lookX, 0, lookZ);
                    
                    // Ajustar la rotaci√≥n del coche seg√∫n la orientaci√≥n inicial del modelo
                    car.rotateY(Math.PI / 2); // Ajuste seg√∫n el modelo
                    
                    // Actualizar chispas
                    updateSparks();
                }
                
                if (renderer && scene && camera) {
                    renderer.render(scene, camera);
                }
            }

            function createSparkSystem() {
                // Crear textura circular para part√≠culas redondas
                const canvas = document.createElement('canvas');
                canvas.width = 64;
                canvas.height = 64;
                const context = canvas.getContext('2d');
                const gradient = context.createRadialGradient(32, 32, 0, 32, 32, 32);
                gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                gradient.addColorStop(0.3, 'rgba(200, 200, 200, 0.8)');
                gradient.addColorStop(1, 'rgba(100, 100, 100, 0)');
                context.fillStyle = gradient;
                context.fillRect(0, 0, 64, 64);
                const texture = new THREE.CanvasTexture(canvas);
                
                // Crear geometr√≠a y material para el humo
                const sparkGeometry = new THREE.BufferGeometry();
                const sparkMaterial = new THREE.PointsMaterial({
                    map: texture,
                    color: 0xaaaaaa,
                    size: 0.4,
                    transparent: true,
                    opacity: 0.15,
                    blending: THREE.NormalBlending,
                    sizeAttenuation: true,
                    depthWrite: false
                });

                // Crear part√≠culas de humo (muy sutil, casi imperceptible)
                for (let i = 0; i < 30; i++) {
                    const spark = new THREE.Vector3();
                    sparkParticles.push({
                        position: spark,
                        velocity: new THREE.Vector3(),
                        life: 0,
                        maxLife: 2,
                        size: 0.3 + Math.random() * 0.2
                    });
                }

                const positions = new Float32Array(sparkParticles.length * 3);
                sparkGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                
                sparkSystem = new THREE.Points(sparkGeometry, sparkMaterial);
                scene.add(sparkSystem);
            }

            function updateSparks() {
                if (!car || !sparkSystem || sparkParticles.length === 0) return;
                
                const speed = Math.abs(rotationSpeed);
                if (speed < 0.001) {
                    // Ocultar humo si est√° parado
                    sparkSystem.visible = false;
                    return;
                }
                
                sparkSystem.visible = true;
                
                // Ajustar opacidad seg√∫n la velocidad (muy r√°pido = un poco m√°s intenso)
                const veryHighSpeed = speed > 0.03; // Velocidad muy alta
                if (veryHighSpeed) {
                    // Un poquito m√°s intenso cuando va muy r√°pido
                    sparkSystem.material.opacity = 0.25;
                    sparkSystem.material.size = 0.5;
                } else {
                    // Humo gris sutil normalmente
                    sparkSystem.material.opacity = 0.15;
                    sparkSystem.material.size = 0.4;
                }
                
                const positions = sparkSystem.geometry.attributes.position;
                
                // Calcular posici√≥n de las ruedas TRASERAS (m√°s atr√°s del coche)
                const wheelY = -0.8; // Altura aproximada de las ruedas traseras
                const wheelOffset = -3.5; // MUCHO m√°s atr√°s del centro del coche (ruedas traseras)
                const wheelWidth = 1.2; // Separaci√≥n entre ruedas
                
                for (let i = 0; i < sparkParticles.length; i++) {
                    const particle = sparkParticles[i];
                    
                    // Si la part√≠cula est√° muerta, crear una nueva
                    const speed = Math.abs(rotationSpeed);
                    const veryHighSpeed = speed > 0.03;
                    const spawnRate = veryHighSpeed ? 0.15 : 0.1; // Un poquito m√°s cuando va muy r√°pido
                    
                    if (particle.life <= 0 || Math.random() < spawnRate) {
                        // Calcular la direcci√≥n hacia atr√°s del coche (opuesta a donde mira)
                        // El coche mira en direcci√≥n tangente al c√≠rculo
                        const tangentX = -Math.sin(angle);
                        const tangentZ = Math.cos(angle);
                        
                        // Posici√≥n trasera: desde el centro del coche, MUCHO m√°s atr√°s (direcci√≥n opuesta a donde mira)
                        const backX = -tangentX * wheelOffset;
                        const backZ = -tangentZ * wheelOffset;
                        
                        // Centrado en la parte trasera, con peque√±a variaci√≥n para las dos ruedas
                        const wheelSide = Math.random() > 0.5 ? 1 : -1;
                        const sideX = Math.cos(angle) * wheelWidth * 0.3 * wheelSide;
                        const sideZ = Math.sin(angle) * wheelWidth * 0.3 * wheelSide;
                        
                        particle.position.x = carGroup.position.x + backX + sideX;
                        particle.position.y = wheelY + (Math.random() - 0.5) * 0.15;
                        particle.position.z = carGroup.position.z + backZ + sideZ;
                        
                        // Velocidad del humo: hacia atr√°s (direcci√≥n opuesta a donde mira el coche)
                        const speed = Math.abs(rotationSpeed);
                        const veryHighSpeed = speed > 0.03;
                        const speedMultiplier = veryHighSpeed ? 0.3 : 0.2; // Un poquito m√°s cuando va muy r√°pido
                        
                        const backwardX = -tangentX * speedMultiplier;
                        const backwardZ = -tangentZ * speedMultiplier;
                        particle.velocity.x = backwardX + (Math.random() - 0.5) * 0.2;
                        particle.velocity.y = Math.random() * 0.1 + 0.05;
                        particle.velocity.z = backwardZ + (Math.random() - 0.5) * 0.2;
                        
                        particle.life = particle.maxLife;
                    }
                    
                    // Actualizar posici√≥n (humo se dispersa m√°s)
                    particle.position.add(particle.velocity);
                    // El humo se dispersa m√°s y sube
                    particle.velocity.x *= 0.98; // Fricci√≥n
                    particle.velocity.z *= 0.98;
                    particle.velocity.y *= 0.99; // Se desacelera al subir
                    particle.life -= 0.015; // Dura m√°s que las chispas
                    
                    // Actualizar en el buffer
                    const i3 = i * 3;
                    positions.array[i3] = particle.position.x;
                    positions.array[i3 + 1] = particle.position.y;
                    positions.array[i3 + 2] = particle.position.z;
                }
                
                positions.needsUpdate = true;
            }

            // Ajustar tama√±o de ventana
            function onWindowResize() {
                if (!camera || !renderer) return;
                
                const width = window.innerWidth;
                const height = window.innerHeight;
                
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                
                renderer.setSize(width, height);
            }

            // Funci√≥n para animar el circuito
            function animateCircuit() {
                const circuitTracks = document.querySelectorAll('.circuit-track');
                
                circuitTracks.forEach(track => {
                    const steps = track.querySelectorAll('.circuit-step');
                    const fillLine = track.querySelector('.circuit-line-fill');
                    const nodes = track.querySelectorAll('.circuit-node');
                    
                    if (!fillLine || steps.length === 0) return;
                    
                    // Animar seg√∫n scroll - m√°s lento y gradual
                    let maxActiveStep = -1;
                    let currentFillProgress = 0;
                    
                    steps.forEach((step, index) => {
                        const stepRect = step.getBoundingClientRect();
                        const viewportHeight = window.innerHeight;
                        const stepTop = stepRect.top;
                        const stepBottom = stepRect.bottom;
                        
                        // Calcular progreso m√°s gradual (necesita estar m√°s centrado en la vista)
                        const stepCenter = stepTop + (stepRect.height / 2);
                        const distanceFromCenter = Math.abs(viewportHeight / 2 - stepCenter);
                        const maxDistance = viewportHeight * 0.35; // √Årea m√°s peque√±a = m√°s lento
                        const stepProgress = Math.max(0, Math.min(1, 1 - (distanceFromCenter / maxDistance)));
                        
                        if (stepProgress > 0.6) {
                            step.classList.add('active');
                            nodes[index]?.classList.add('active');
                            maxActiveStep = index;
                            
                            // Calcular progreso de relleno m√°s gradual
                            const stepFillProgress = (stepProgress - 0.6) / 0.4; // Normalizar entre 0.6 y 1.0
                            const baseFill = (index / steps.length) * 100;
                            const stepFill = (1 / steps.length) * stepFillProgress * 100;
                            currentFillProgress = Math.max(currentFillProgress, baseFill + stepFill);
                            
                            // Marcar anteriores como completados solo cuando este paso est√° muy activo
                            if (stepProgress > 0.95) {
                                for (let i = 0; i < index; i++) {
                                    steps[i]?.classList.add('completed');
                                    steps[i]?.classList.remove('active');
                                    nodes[i]?.classList.add('completed');
                                    nodes[i]?.classList.remove('active');
                                }
                            }
                        } else {
                            step.classList.remove('active');
                            nodes[index]?.classList.remove('active');
                        }
                    });
                    
                    // Aplicar altura del fill de forma m√°s gradual
                    if (maxActiveStep >= 0) {
                        const targetHeight = Math.min(currentFillProgress, 100);
                        const currentHeight = parseFloat(fillLine.style.height) || 0;
                        // Interpolaci√≥n muy suave para movimiento m√°s lento (solo 1.5% por frame)
                        const newHeight = currentHeight + (targetHeight - currentHeight) * 0.015;
                        fillLine.style.height = newHeight + '%';
                    } else {
                        const currentHeight = parseFloat(fillLine.style.height) || 0;
                        const newHeight = currentHeight * 0.95; // Decaer gradualmente
                        fillLine.style.height = newHeight + '%';
                    }
                });
            }
            
            // Animar circuito en cada frame
            let circuitAnimationId = null;
            function startCircuitAnimation() {
                if (circuitAnimationId) return;
                function loop() {
                    animateCircuit();
                    circuitAnimationId = requestAnimationFrame(loop);
                }
                circuitAnimationId = requestAnimationFrame(loop);
            }
            
            // Inicializar cuando se carga la p√°gina
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    init();
                    setTimeout(updateBackgroundAnimation, 100);
                    setTimeout(startCircuitAnimation, 300);
                });
            } else {
                init();
                setTimeout(updateBackgroundAnimation, 100);
                setTimeout(startCircuitAnimation, 300);
            }
            
            // Tambi√©n animar en scroll
            const mainContainer = document.getElementById('main-container');
            if (mainContainer) {
                mainContainer.addEventListener('scroll', animateCircuit, { passive: true });
            }
            
            // Cargar logo (primero del HTML si est√° inyectado, luego de la URL)
            function loadLogo() {
                const logoImg = document.getElementById('logo-img');
                if (!logoImg) return;
                
                // Si el logo ya tiene un src (inyectado por el servidor), usarlo
                if (logoImg.src && logoImg.src !== window.location.href && !logoImg.src.includes('data:,')) {
                    logoImg.style.display = 'block';
                    console.log('‚úÖ Logo cargado desde HTML (inyectado por servidor):', logoImg.src);
                    return;
                }
                
                // Si no, intentar cargarlo desde par√°metro de URL
                const urlParams = new URLSearchParams(window.location.search);
                const logoUrl = urlParams.get('logo');
                
                if (logoUrl) {
                    logoImg.src = decodeURIComponent(logoUrl);
                    logoImg.style.display = 'block';
                    console.log('‚úÖ Logo cargado desde URL:', logoUrl);
                } else {
                    console.log('‚ÑπÔ∏è No se proporcion√≥ logo (ni en HTML ni en URL)');
                }
            }
            
            // Cargar informaci√≥n del cliente desde par√°metros de URL
            function loadClientInfo() {
                const urlParams = new URLSearchParams(window.location.search);
                const clientName = urlParams.get('clientName');
                const clientCompany = urlParams.get('clientCompany');
                const clientDetails = urlParams.get('clientDetails');
                
                const container = document.getElementById('client-info-container');
                const nameEl = document.getElementById('client-name');
                const companyEl = document.getElementById('client-company');
                const detailsEl = document.getElementById('client-details');
                
                if (!container || !nameEl || !companyEl || !detailsEl) return;
                
                let hasInfo = false;
                
                if (clientName) {
                    nameEl.textContent = decodeURIComponent(clientName);
                    hasInfo = true;
                }
                
                if (clientCompany) {
                    companyEl.textContent = decodeURIComponent(clientCompany);
                    hasInfo = true;
                }
                
                if (clientDetails) {
                    detailsEl.textContent = decodeURIComponent(clientDetails);
                    hasInfo = true;
                }
                
                if (hasInfo) {
                    container.style.display = 'flex';
                    console.log('‚úÖ Informaci√≥n del cliente cargada');
                }
            }
            
            // Cargar logo al iniciar
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    loadLogo();
                    loadClientInfo();
                });
            } else {
                loadLogo();
                loadClientInfo();
            }
        </script>
    </div>
</body>
</html>
